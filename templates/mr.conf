{% from "macros/common.conf" import login, section with context %}
/* Note that there are hidden junos groups: show groups junos-defaults */
groups {
    {{ section("mr", "groups", 4) }}
}
replace: system {
    {{ section("common", "system", 4) }}
}
replace: snmp {
    {{ section("common", "snmp", 4) }}
}
{{ section("common", "ospf") }}
{{ section("common", "lldp") }}
{{ section("common", "security") }}
replace: policy-options {
    policy-statement ospf_export {
        term directs {
            from protocol direct;
            then accept;
        }
        term statics {
            from protocol [ static aggregate ];
            then accept;
        }
        then reject;
    }
    policy-statement BGP_Default {
        term default4 {
            from {
                route-filter 0.0.0.0/0 exact;
            }
            then accept;
        }
        term default6 {
            from {
                route-filter ::/0 exact;
            }
            then accept;
        }
        then reject;
    }
    policy-statement BGP_direct {
        term direct {
            from protocol direct;
            then accept;
        }
        then reject;
    }
}
routing-options {
    replace: graceful-restart;
    replace: router-id {{ metadata['ip4'] }};
}
{{ section("mr", "interfaces", 4) }}
replace: forwarding-options {
    {{ section("common", "helpers", 4) }}
}